# ç§»åŠ¨ç«¯ç»„ä»¶åº“å®šåˆ¶å®æ–½è®¡åˆ’

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: rbase-mobile å®šåˆ¶ç»„ä»¶åº“
**é¡¹ç›®è·¯å¾„**: /Users/n0liu/Desktop/rbase-mobile
**åŸºç¡€æŠ€æœ¯æ ˆ**: Next.js 16 + React 19 + Ant Design Mobile 5.41.1

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

1. âœ… **å“åº”å¼é€‚é…**ï¼šæ”¯æŒæ‰‹æœº(375px)åˆ°å¹³æ¿(768-1366px)å…¨å°ºå¯¸è‡ªé€‚åº”
2. âœ… **æ¨ªç«–å±æ”¯æŒ**ï¼šå®Œæ•´çš„æ¨ªç«–å±å¸ƒå±€é€‚é…
3. âœ… **è®¾è®¡ç³»ç»Ÿ**ï¼šç»Ÿä¸€çš„é¢œè‰²ã€å­—ä½“ã€é—´è·è§„èŒƒ
4. âœ… **æš—é»‘æ¨¡å¼**ï¼šè·Ÿéšç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢ä¸»é¢˜
5. âœ… **ç»„ä»¶å°è£…**ï¼šåŸºäº Ant Design Mobile çš„äºŒæ¬¡å°è£…

---

## ğŸ“ è®¾è®¡ç³»ç»Ÿè§„åˆ’

### 1. å“åº”å¼æ–­ç‚¹ç­–ç•¥

```typescript
// src/theme/breakpoints.ts
export const breakpoints = {
  mobile: '375px',      // æ‰‹æœºåŸºå‡†
  mobileLarge: '480px', // å¤§å±æ‰‹æœº
  tablet: '768px',      // å¹³æ¿ï¼ˆç«–å±ï¼‰
  tabletLarge: '1024px',// å¹³æ¿ï¼ˆæ¨ªå±ï¼‰
  desktop: '1366px',    // æ¡Œé¢
} as const;

export const mediaQueries = {
  mobile: `@media (max-width: 767px)`,
  tablet: `@media (min-width: 768px) and (max-width: 1023px)`,
  tabletLarge: `@media (min-width: 1024px) and (max-width: 1365px)`,
  desktop: `@media (min-width: 1366px)`,
  tabletUp: `@media (min-width: 768px)`,  // å¹³æ¿åŠä»¥ä¸Š
  portrait: `@media (orientation: portrait)`,
  landscape: `@media (orientation: landscape)`,
} as const;
```

### 2. è®¾è®¡ä»¤ç‰Œç³»ç»Ÿ

#### A. é¢œè‰²ç³»ç»Ÿï¼ˆäº®è‰² + æš—é»‘æ¨¡å¼ï¼‰

```typescript
// src/theme/tokens/colors.ts
export const lightColors = {
  // å“ç‰Œè‰²
  primary: '#1677FF',
  primaryHover: '#4096FF',
  primaryActive: '#0958D9',

  // åŠŸèƒ½è‰²
  success: '#52c41a',
  warning: '#faad14',
  danger: '#ff3141',
  info: '#1677FF',

  // æ–‡æœ¬è‰²
  textPrimary: '#333333',
  textSecondary: '#666666',
  textTertiary: '#999999',
  textQuaternary: '#CCCCCC',
  textDisabled: '#DDDDDD',
  textReverse: '#FFFFFF',

  // èƒŒæ™¯è‰²
  background: '#FFFFFF',
  backgroundSecondary: '#FAFAFA',
  backgroundTertiary: '#F5F5F5',
  backgroundDisabled: '#F0F0F0',

  // è¾¹æ¡†è‰²
  border: '#EEEEEE',
  borderSecondary: '#E0E0E0',
  borderStrong: '#CCCCCC',

  // é®ç½©
  mask: 'rgba(0, 0, 0, 0.45)',
  maskLight: 'rgba(0, 0, 0, 0.2)',
} as const;

export const darkColors = {
  // å“ç‰Œè‰²
  primary: '#3C89E8',
  primaryHover: '#5A9FF0',
  primaryActive: '#2373DB',

  // åŠŸèƒ½è‰²
  success: '#6BBF4E',
  warning: '#FAAD14',
  danger: '#FF4D4F',
  info: '#3C89E8',

  // æ–‡æœ¬è‰²
  textPrimary: '#E8E8E8',
  textSecondary: '#B8B8B8',
  textTertiary: '#8C8C8C',
  textQuaternary: '#595959',
  textDisabled: '#434343',
  textReverse: '#1F1F1F',

  // èƒŒæ™¯è‰²
  background: '#141414',
  backgroundSecondary: '#1F1F1F',
  backgroundTertiary: '#2A2A2A',
  backgroundDisabled: '#383838',

  // è¾¹æ¡†è‰²
  border: '#303030',
  borderSecondary: '#3A3A3A',
  borderStrong: '#505050',

  // é®ç½©
  mask: 'rgba(0, 0, 0, 0.65)',
  maskLight: 'rgba(0, 0, 0, 0.35)',
} as const;
```

#### B. å­—ä½“ç³»ç»Ÿï¼ˆå“åº”å¼ï¼‰

```typescript
// src/theme/tokens/typography.ts
export const typography = {
  fontFamily: {
    base: '-apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif',
    monospace: '"SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace',
  },

  // æ‰‹æœºç«¯å­—å·
  mobile: {
    h1: '24px',
    h2: '20px',
    h3: '18px',
    h4: '16px',
    h5: '14px',
    body: '14px',
    bodySmall: '13px',
    caption: '12px',
    overline: '11px',
  },

  // å¹³æ¿ç«¯å­—å·
  tablet: {
    h1: '28px',
    h2: '24px',
    h3: '20px',
    h4: '18px',
    h5: '16px',
    body: '15px',
    bodySmall: '14px',
    caption: '13px',
    overline: '12px',
  },

  // å­—é‡
  fontWeight: {
    light: 300,
    regular: 400,
    medium: 500,
    semibold: 600,
    bold: 700,
  },

  // è¡Œé«˜
  lineHeight: {
    tight: 1.2,
    normal: 1.5,
    relaxed: 1.75,
  },
} as const;
```

#### C. é—´è·ç³»ç»Ÿ

```typescript
// src/theme/tokens/spacing.ts
export const spacing = {
  // åŸºç¡€é—´è·ï¼ˆæ‰‹æœºï¼‰
  mobile: {
    xs: '4px',
    sm: '8px',
    md: '12px',
    lg: '16px',
    xl: '20px',
    xxl: '24px',
    xxxl: '32px',
  },

  // å¹³æ¿é—´è·ï¼ˆæ›´å¤§ï¼‰
  tablet: {
    xs: '6px',
    sm: '12px',
    md: '16px',
    lg: '24px',
    xl: '32px',
    xxl: '40px',
    xxxl: '48px',
  },

  // ç»„ä»¶ç‰¹å®š
  component: {
    // å¯¼èˆªæ 
    navBarHeight: {
      mobile: '44px',
      tablet: '56px',
    },

    // åˆ—è¡¨é¡¹
    listItemHeight: {
      mobile: '50px',
      tablet: '64px',
    },

    // æŒ‰é’®é«˜åº¦
    buttonHeight: {
      small: {
        mobile: '32px',
        tablet: '36px',
      },
      medium: {
        mobile: '44px',
        tablet: '48px',
      },
      large: {
        mobile: '52px',
        tablet: '56px',
      },
    },

    // é¡µé¢è¾¹è·
    pageHorizontal: {
      mobile: '16px',
      tablet: '32px',
    },
  },
} as const;
```

#### D. åœ†è§’ç³»ç»Ÿ

```typescript
// src/theme/tokens/radius.ts
export const radius = {
  none: '0px',
  xs: '2px',
  sm: '4px',
  md: '8px',
  lg: '12px',
  xl: '16px',
  xxl: '20px',
  full: '9999px',

  // ç»„ä»¶ç‰¹å®š
  button: '8px',
  card: '12px',
  modal: '16px',
  input: '6px',
  tag: '4px',
} as const;
```

#### E. é˜´å½±ç³»ç»Ÿ

```typescript
// src/theme/tokens/shadows.ts
export const shadows = {
  sm: '0 1px 3px rgba(0, 0, 0, 0.08)',
  md: '0 2px 8px rgba(0, 0, 0, 0.1)',
  lg: '0 4px 16px rgba(0, 0, 0, 0.12)',
  xl: '0 8px 24px rgba(0, 0, 0, 0.15)',

  // æš—é»‘æ¨¡å¼
  dark: {
    sm: '0 1px 3px rgba(0, 0, 0, 0.3)',
    md: '0 2px 8px rgba(0, 0, 0, 0.4)',
    lg: '0 4px 16px rgba(0, 0, 0, 0.5)',
    xl: '0 8px 24px rgba(0, 0, 0, 0.6)',
  },
} as const;
```

#### F. åŠ¨ç”»ç³»ç»Ÿ

```typescript
// src/theme/tokens/animation.ts
export const animation = {
  duration: {
    fast: '150ms',
    normal: '250ms',
    slow: '350ms',
  },

  easing: {
    easeIn: 'cubic-bezier(0.4, 0, 1, 1)',
    easeOut: 'cubic-bezier(0, 0, 0.2, 1)',
    easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
  },
} as const;
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### 1. ä¸»é¢˜åˆ‡æ¢æœºåˆ¶

#### A. ä¸»é¢˜ Context

```typescript
// src/contexts/ThemeContext.tsx
import { createContext, useContext, useEffect, useState, ReactNode } from 'react';

type ThemeMode = 'light' | 'dark' | 'system';
type ResolvedTheme = 'light' | 'dark';

interface ThemeContextValue {
  mode: ThemeMode;
  resolvedTheme: ResolvedTheme;
  setMode: (mode: ThemeMode) => void;
}

const ThemeContext = createContext<ThemeContextValue | undefined>(undefined);

export function ThemeProvider({ children }: { children: ReactNode }) {
  const [mode, setMode] = useState<ThemeMode>('system');
  const [resolvedTheme, setResolvedTheme] = useState<ResolvedTheme>('light');

  useEffect(() => {
    // æ£€æµ‹ç³»ç»Ÿä¸»é¢˜
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');

    const updateTheme = () => {
      if (mode === 'system') {
        setResolvedTheme(mediaQuery.matches ? 'dark' : 'light');
      } else {
        setResolvedTheme(mode as ResolvedTheme);
      }
    };

    updateTheme();

    // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
    mediaQuery.addEventListener('change', updateTheme);
    return () => mediaQuery.removeEventListener('change', updateTheme);
  }, [mode]);

  return (
    <ThemeContext.Provider value={{ mode, resolvedTheme, setMode }}>
      {children}
    </ThemeContext.Provider>
  );
}

export function useTheme() {
  const context = useContext(ThemeContext);
  if (!context) throw new Error('useTheme must be used within ThemeProvider');
  return context;
}
```

#### B. ä¸»é¢˜åº”ç”¨

```typescript
// src/theme/index.ts
import { lightColors, darkColors } from './tokens/colors';
import { typography } from './tokens/typography';
import { spacing } from './tokens/spacing';
import { radius } from './tokens/radius';
import { shadows } from './tokens/shadows';

export function getThemeConfig(theme: 'light' | 'dark', deviceType: 'mobile' | 'tablet') {
  const colors = theme === 'light' ? lightColors : darkColors;
  const fontSize = deviceType === 'mobile' ? typography.mobile : typography.tablet;
  const space = deviceType === 'mobile' ? spacing.mobile : spacing.tablet;

  return {
    // Ant Design Mobile CSS å˜é‡
    '--adm-color-primary': colors.primary,
    '--adm-color-success': colors.success,
    '--adm-color-warning': colors.warning,
    '--adm-color-danger': colors.danger,

    '--adm-color-text': colors.textPrimary,
    '--adm-color-text-secondary': colors.textSecondary,
    '--adm-color-weak': colors.textTertiary,

    '--adm-color-background': colors.background,
    '--adm-color-border': colors.border,

    '--adm-font-size-main': fontSize.body,
    '--adm-font-size-1': fontSize.overline,
    '--adm-font-size-3': fontSize.caption,
    '--adm-font-size-5': fontSize.body,
    '--adm-font-size-7': fontSize.h5,
    '--adm-font-size-8': fontSize.h4,
    '--adm-font-size-10': fontSize.h2,

    '--adm-radius-s': radius.sm,
    '--adm-radius-m': radius.md,
    '--adm-radius-l': radius.lg,

    '--adm-button-border-radius': radius.button,
    '--adm-nav-bar-height': spacing.component.navBarHeight[deviceType],
    '--adm-list-item-padding-left': space.lg,
  };
}
```

### 2. å“åº”å¼å·¥å…·

#### A. å“åº”å¼ Hook

```typescript
// src/hooks/useResponsive.ts
import { useState, useEffect } from 'react';

type DeviceType = 'mobile' | 'tablet' | 'desktop';
type Orientation = 'portrait' | 'landscape';

interface ResponsiveState {
  deviceType: DeviceType;
  orientation: Orientation;
  width: number;
  height: number;
  isMobile: boolean;
  isTablet: boolean;
  isDesktop: boolean;
  isPortrait: boolean;
  isLandscape: boolean;
}

export function useResponsive(): ResponsiveState {
  const [state, setState] = useState<ResponsiveState>(() => getResponsiveState());

  useEffect(() => {
    const handleResize = () => {
      setState(getResponsiveState());
    };

    window.addEventListener('resize', handleResize);
    window.addEventListener('orientationchange', handleResize);

    return () => {
      window.removeEventListener('resize', handleResize);
      window.removeEventListener('orientationchange', handleResize);
    };
  }, []);

  return state;
}

function getResponsiveState(): ResponsiveState {
  const width = window.innerWidth;
  const height = window.innerHeight;
  const orientation: Orientation = height >= width ? 'portrait' : 'landscape';

  let deviceType: DeviceType;
  if (width < 768) {
    deviceType = 'mobile';
  } else if (width < 1366) {
    deviceType = 'tablet';
  } else {
    deviceType = 'desktop';
  }

  return {
    deviceType,
    orientation,
    width,
    height,
    isMobile: deviceType === 'mobile',
    isTablet: deviceType === 'tablet',
    isDesktop: deviceType === 'desktop',
    isPortrait: orientation === 'portrait',
    isLandscape: orientation === 'landscape',
  };
}
```

#### B. åª’ä½“æŸ¥è¯¢ Hook

```typescript
// src/hooks/useMediaQuery.ts
import { useState, useEffect } from 'react';

export function useMediaQuery(query: string): boolean {
  const [matches, setMatches] = useState(false);

  useEffect(() => {
    const mediaQuery = window.matchMedia(query);
    setMatches(mediaQuery.matches);

    const handler = (e: MediaQueryListEvent) => setMatches(e.matches);
    mediaQuery.addEventListener('change', handler);

    return () => mediaQuery.removeEventListener('change', handler);
  }, [query]);

  return matches;
}
```

### 3. PostCSS é…ç½®æ›´æ–°

```javascript
// postcss.config.mjs
const config = {
  plugins: {
    'postcss-px-to-viewport-8-plugin': {
      viewportWidth: 375,        // åŸºå‡†å®½åº¦
      unitPrecision: 5,
      viewportUnit: 'vw',
      selectorBlackList: ['.ignore', '.hairlines', 'adm-', 'tablet-'], // æ’é™¤ç±»å
      minPixelValue: 1,
      mediaQuery: false,

      // å¹³æ¿é€‚é…ï¼šä½¿ç”¨ landscape å‡½æ•°è½¬æ¢
      landscape: true,
      landscapeUnit: 'vw',
      landscapeWidth: 768,       // å¹³æ¿åŸºå‡†å®½åº¦
    },
  },
};

export default config;
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ theme/
â”‚   â”œâ”€â”€ index.ts                    # ä¸»é¢˜é…ç½®å¯¼å‡º
â”‚   â”œâ”€â”€ tokens/                     # è®¾è®¡ä»¤ç‰Œ
â”‚   â”‚   â”œâ”€â”€ colors.ts              # é¢œè‰²ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ typography.ts          # å­—ä½“ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ spacing.ts             # é—´è·ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ radius.ts              # åœ†è§’ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ shadows.ts             # é˜´å½±ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ animation.ts           # åŠ¨ç”»ç³»ç»Ÿ
â”‚   â”œâ”€â”€ breakpoints.ts             # å“åº”å¼æ–­ç‚¹
â”‚   â””â”€â”€ themes/                    # ä¸»é¢˜é…ç½®
â”‚       â”œâ”€â”€ light.ts               # äº®è‰²ä¸»é¢˜
â”‚       â””â”€â”€ dark.ts                # æš—é»‘ä¸»é¢˜
â”‚
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ ThemeContext.tsx           # ä¸»é¢˜ Context
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useResponsive.ts           # å“åº”å¼ Hook
â”‚   â”œâ”€â”€ useMediaQuery.ts           # åª’ä½“æŸ¥è¯¢ Hook
â”‚   â””â”€â”€ useTheme.ts                # ä¸»é¢˜ Hook
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ base/                      # åŸºç¡€ç»„ä»¶ï¼ˆäºŒæ¬¡å°è£…ï¼‰
â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ styles.module.css
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ Card/
â”‚   â”‚   â”œâ”€â”€ List/
â”‚   â”‚   â””â”€â”€ NavBar/
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/                    # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PageContainer/        # é¡µé¢å®¹å™¨ï¼ˆå¤„ç†å®‰å…¨åŒºåŸŸï¼‰
â”‚   â”‚   â”œâ”€â”€ ResponsiveLayout/     # å“åº”å¼å¸ƒå±€
â”‚   â”‚   â””â”€â”€ OrientationLayout/    # æ¨ªç«–å±å¸ƒå±€
â”‚   â”‚
â”‚   â””â”€â”€ common/                    # é€šç”¨ç»„ä»¶
â”‚       â”œâ”€â”€ ThemeToggle/          # ä¸»é¢˜åˆ‡æ¢å™¨
â”‚       â””â”€â”€ ResponsiveImage/      # å“åº”å¼å›¾ç‰‡
â”‚
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ globals.css               # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ reset.css                 # æ ·å¼é‡ç½®
â”‚   â”œâ”€â”€ variables.css             # CSS å˜é‡
â”‚   â””â”€â”€ responsive.css            # å“åº”å¼æ ·å¼
â”‚
â””â”€â”€ app/
    â””â”€â”€ layout.tsx                # æ ¹å¸ƒå±€ï¼ˆåº”ç”¨ä¸»é¢˜ï¼‰
```

---

## ğŸ”¨ å®æ–½æ­¥éª¤

### ğŸ“Š æ•´ä½“è¿›åº¦

| é˜¶æ®µ | çŠ¶æ€ | å®Œæˆåº¦ | è¯´æ˜ |
|------|------|--------|------|
| é˜¶æ®µ 1ï¼šè®¾è®¡ä»¤ç‰Œç³»ç»Ÿ | âœ… å·²å®Œæˆ | 100% | æ‰€æœ‰è®¾è®¡ä»¤ç‰Œå·²åˆ›å»º |
| é˜¶æ®µ 2ï¼šä¸»é¢˜åˆ‡æ¢æœºåˆ¶ | âœ… å·²å®Œæˆ | 100% | ThemeContext å’Œä¸»é¢˜ç³»ç»Ÿå·²å®Œæˆ |
| é˜¶æ®µ 3ï¼šå“åº”å¼å·¥å…· | â³ è¿›è¡Œä¸­ | 60% | Hooks å·²å®Œæˆï¼ŒPostCSS å’Œæ ·å¼å¾…å®Œæˆ |
| é˜¶æ®µ 4ï¼šå¸ƒå±€ç»„ä»¶ | âŒ æœªå¼€å§‹ | 0% | - |
| é˜¶æ®µ 5ï¼šåŸºç¡€ç»„ä»¶å°è£… | âŒ æœªå¼€å§‹ | 0% | - |
| é˜¶æ®µ 6ï¼šå…¨å±€æ ·å¼ä¼˜åŒ– | âŒ æœªå¼€å§‹ | 0% | - |
| é˜¶æ®µ 7ï¼šç¤ºä¾‹å’Œæ–‡æ¡£ | âŒ æœªå¼€å§‹ | 0% | - |

**å½“å‰æ€»è¿›åº¦ï¼šçº¦ 37%**

---

### é˜¶æ®µ 1ï¼šè®¾è®¡ä»¤ç‰Œç³»ç»Ÿï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰âœ… å·²å®Œæˆ

**ç›®æ ‡**ï¼šå»ºç«‹å®Œæ•´çš„è®¾è®¡ä»¤ç‰Œç³»ç»Ÿ

**ä»»åŠ¡æ¸…å•**ï¼š
1. âœ… åˆ›å»º `src/theme/tokens/` ç›®å½•
2. âœ… åˆ›å»ºé¢œè‰²ä»¤ç‰Œæ–‡ä»¶ `colors.ts`ï¼ˆäº®è‰² + æš—é»‘ï¼‰
3. âœ… åˆ›å»ºå­—ä½“ä»¤ç‰Œæ–‡ä»¶ `typography.ts`ï¼ˆå“åº”å¼å­—å·ï¼‰
4. âœ… åˆ›å»ºé—´è·ä»¤ç‰Œæ–‡ä»¶ `spacing.ts`ï¼ˆæ‰‹æœº + å¹³æ¿ï¼‰
5. âœ… åˆ›å»ºåœ†è§’ä»¤ç‰Œæ–‡ä»¶ `radius.ts`
6. âœ… åˆ›å»ºé˜´å½±ä»¤ç‰Œæ–‡ä»¶ `shadows.ts`
7. âœ… åˆ›å»ºåŠ¨ç”»ä»¤ç‰Œæ–‡ä»¶ `animation.ts`
8. âœ… åˆ›å»ºæ–­ç‚¹é…ç½® `breakpoints.ts`

**æ–‡ä»¶**ï¼š
- `src/theme/tokens/colors.ts`
- `src/theme/tokens/typography.ts`
- `src/theme/tokens/spacing.ts`
- `src/theme/tokens/radius.ts`
- `src/theme/tokens/shadows.ts`
- `src/theme/tokens/animation.ts`
- `src/theme/breakpoints.ts`

**éªŒæ”¶æ ‡å‡†**ï¼š
- ä»¤ç‰Œç³»ç»Ÿå®Œæ•´è¦†ç›–é¢œè‰²ã€å­—ä½“ã€é—´è·ã€åœ†è§’ã€é˜´å½±
- æ”¯æŒäº®è‰²å’Œæš—é»‘ä¸¤å¥—ä¸»é¢˜
- æ”¯æŒæ‰‹æœºå’Œå¹³æ¿ä¸¤å¥—å°ºå¯¸

---

### é˜¶æ®µ 2ï¼šä¸»é¢˜åˆ‡æ¢æœºåˆ¶ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰âœ… å·²å®Œæˆ

**ç›®æ ‡**ï¼šå®ç°è·Ÿéšç³»ç»Ÿçš„ä¸»é¢˜åˆ‡æ¢

**ä»»åŠ¡æ¸…å•**ï¼š
1. âœ… åˆ›å»º ThemeContext (`src/contexts/ThemeContext.tsx`)
2. âœ… å®ç°ç³»ç»Ÿä¸»é¢˜æ£€æµ‹
3. âœ… å®ç°ä¸»é¢˜åˆ‡æ¢é€»è¾‘
4. âœ… åˆ›å»ºä¸»é¢˜é…ç½®ç”Ÿæˆå‡½æ•° (`src/theme/index.ts`)
5. âœ… åœ¨ `app/layout.tsx` ä¸­é›†æˆ ThemeProvider
6. âœ… åº”ç”¨ä¸»é¢˜é…ç½®åˆ° ConfigProvider

**æ–‡ä»¶**ï¼š
- `src/contexts/ThemeContext.tsx`ï¼ˆæ–°å»ºï¼‰
- `src/theme/index.ts`ï¼ˆä¿®æ”¹ï¼‰
- `src/app/layout.tsx`ï¼ˆä¿®æ”¹ï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- ä¸»é¢˜è·Ÿéšç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢
- æ”¯æŒæ‰‹åŠ¨åˆ‡æ¢ä¸»é¢˜ï¼ˆlight/dark/systemï¼‰
- ä¸»é¢˜åˆ‡æ¢å¹³æ»‘æ— é—ªçƒ

---

### é˜¶æ®µ 3ï¼šå“åº”å¼å·¥å…·ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰â³ è¿›è¡Œä¸­

**ç›®æ ‡**ï¼šå®ç°å“åº”å¼å’Œæ¨ªç«–å±æ£€æµ‹

**ä»»åŠ¡æ¸…å•**ï¼š
1. âœ… åˆ›å»º `useResponsive` Hookï¼ˆå·²å®Œæˆï¼Œé›†æˆäº†è®¾å¤‡ç±»å‹å’Œå±å¹•æ–¹å‘æ£€æµ‹ï¼‰
2. âœ… åˆ›å»º `useMediaQuery` Hookï¼ˆå·²å®Œæˆï¼‰
3. ~~âŒ åˆ›å»º `useOrientation` Hook~~ï¼ˆä¸éœ€è¦ï¼ŒåŠŸèƒ½å·²é›†æˆåœ¨ `useResponsive` ä¸­ï¼‰
4. âŒ æ›´æ–° PostCSS é…ç½®æ”¯æŒå¹³æ¿
5. âŒ åˆ›å»ºå…¨å±€å“åº”å¼æ ·å¼æ–‡ä»¶

**å·²åˆ›å»ºæ–‡ä»¶**ï¼š
- âœ… `src/hooks/useResponsive.ts`ï¼ˆæ–°å»ºï¼ŒåŒ…å« deviceType å’Œ orientation æ£€æµ‹ï¼‰
- âœ… `src/hooks/useMediaQuery.ts`ï¼ˆæ–°å»ºï¼‰

**å¾…åˆ›å»ºæ–‡ä»¶**ï¼š
- âŒ `postcss.config.mjs`ï¼ˆéœ€ä¿®æ”¹ï¼‰
- âŒ `src/styles/responsive.css`ï¼ˆéœ€æ–°å»ºï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… Hooks èƒ½æ­£ç¡®æ£€æµ‹è®¾å¤‡ç±»å‹
- âœ… Hooks èƒ½æ­£ç¡®æ£€æµ‹å±å¹•æ–¹å‘
- âŒ æ ·å¼èƒ½è‡ªåŠ¨é€‚é…ä¸åŒå±å¹•å°ºå¯¸

---

### é˜¶æ®µ 4ï¼šå¸ƒå±€ç»„ä»¶ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰âŒ æœªå¼€å§‹

**ç›®æ ‡**ï¼šåˆ›å»ºå“åº”å¼å¸ƒå±€ç»„ä»¶

**ä»»åŠ¡æ¸…å•**ï¼š
1. âŒ åˆ›å»º PageContainer ç»„ä»¶ï¼ˆå¤„ç†å®‰å…¨åŒºåŸŸï¼‰
2. âŒ åˆ›å»º ResponsiveLayout ç»„ä»¶
3. âŒ åˆ›å»º OrientationLayout ç»„ä»¶ï¼ˆæ¨ªç«–å±åˆ‡æ¢ï¼‰
4. âŒ åˆ›å»º ResponsiveGrid ç»„ä»¶
5. âŒ åˆ›å»ºç¤ºä¾‹é¡µé¢

**æ–‡ä»¶**ï¼š
- `src/components/layout/PageContainer/index.tsx`
- `src/components/layout/ResponsiveLayout/index.tsx`
- `src/components/layout/OrientationLayout/index.tsx`
- `src/components/layout/ResponsiveGrid/index.tsx`

**éªŒæ”¶æ ‡å‡†**ï¼š
- å¸ƒå±€èƒ½è‡ªåŠ¨é€‚é…æ‰‹æœºå’Œå¹³æ¿
- æ¨ªç«–å±åˆ‡æ¢æµç•…
- å®‰å…¨åŒºåŸŸæ­£ç¡®å¤„ç†

---

### é˜¶æ®µ 5ï¼šåŸºç¡€ç»„ä»¶äºŒæ¬¡å°è£…ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰âŒ æœªå¼€å§‹

**ç›®æ ‡**ï¼šåŸºäº Ant Design Mobile å°è£…å“åº”å¼ç»„ä»¶

**ä»»åŠ¡æ¸…å•**ï¼š
1. âŒ å°è£… Button ç»„ä»¶ï¼ˆå“åº”å¼å°ºå¯¸ï¼‰
2. âŒ å°è£… Card ç»„ä»¶ï¼ˆå“åº”å¼é—´è·ï¼‰
3. âŒ å°è£… List ç»„ä»¶ï¼ˆå“åº”å¼é«˜åº¦ï¼‰
4. âŒ å°è£… NavBar ç»„ä»¶ï¼ˆå“åº”å¼é«˜åº¦ï¼‰
5. âŒ åˆ›å»ºç»„ä»¶æ–‡æ¡£å’Œç¤ºä¾‹

**æ–‡ä»¶**ï¼š
- `src/components/base/Button/index.tsx`
- `src/components/base/Card/index.tsx`
- `src/components/base/List/index.tsx`
- `src/components/base/NavBar/index.tsx`

**éªŒæ”¶æ ‡å‡†**ï¼š
- ç»„ä»¶åœ¨æ‰‹æœºå’Œå¹³æ¿ä¸Šæ˜¾ç¤ºæ•ˆæœè‰¯å¥½
- ç»„ä»¶ API ä¸åŸ Ant Design Mobile ä¿æŒä¸€è‡´
- æ–°å¢å“åº”å¼ç›¸å…³ props

---

### é˜¶æ®µ 6ï¼šå…¨å±€æ ·å¼ä¼˜åŒ–ï¼ˆä¼˜å…ˆçº§ï¼šä½ï¼‰âŒ æœªå¼€å§‹

**ç›®æ ‡**ï¼šä¼˜åŒ–å…¨å±€æ ·å¼å’Œ CSS å˜é‡

**ä»»åŠ¡æ¸…å•**ï¼š
1. âŒ æ›´æ–° `globals.css`ï¼ˆæ·»åŠ  CSS å˜é‡ï¼‰
2. âŒ åˆ›å»º `reset.css`ï¼ˆæ ·å¼é‡ç½®ï¼‰
3. âŒ åˆ›å»º `variables.css`ï¼ˆCSS è‡ªå®šä¹‰å±æ€§ï¼‰
4. âŒ ä¼˜åŒ–æš—é»‘æ¨¡å¼æ ·å¼
5. âŒ æ·»åŠ æ»šåŠ¨æ¡æ ·å¼

**æ–‡ä»¶**ï¼š
- `src/app/globals.css`ï¼ˆä¿®æ”¹ï¼‰
- `src/styles/reset.css`ï¼ˆæ–°å»ºï¼‰
- `src/styles/variables.css`ï¼ˆæ–°å»ºï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- å…¨å±€æ ·å¼ç»Ÿä¸€
- æš—é»‘æ¨¡å¼æ— è‰²å½©å¯¹æ¯”åº¦é—®é¢˜
- æ»šåŠ¨æ¡æ ·å¼ç¾è§‚

---

### é˜¶æ®µ 7ï¼šç¤ºä¾‹é¡µé¢å’Œæ–‡æ¡£ï¼ˆä¼˜å…ˆçº§ï¼šä½ï¼‰âŒ æœªå¼€å§‹

**ç›®æ ‡**ï¼šåˆ›å»ºç»„ä»¶ç¤ºä¾‹å’Œä½¿ç”¨æ–‡æ¡£

**ä»»åŠ¡æ¸…å•**ï¼š
1. âŒ åˆ›å»ºç»„ä»¶å±•ç¤ºé¡µé¢ `/demo`
2. âŒ åˆ›å»ºå“åº”å¼æ¼”ç¤ºé¡µé¢
3. âŒ åˆ›å»ºæ¨ªç«–å±æ¼”ç¤ºé¡µé¢
4. âŒ åˆ›å»ºä¸»é¢˜åˆ‡æ¢æ¼”ç¤º
5. âŒ ç¼–å†™ä½¿ç”¨æ–‡æ¡£

**æ–‡ä»¶**ï¼š
- `src/app/demo/page.tsx`ï¼ˆä¿®æ”¹ï¼‰
- `src/app/demo/responsive/page.tsx`ï¼ˆæ–°å»ºï¼‰
- `src/app/demo/orientation/page.tsx`ï¼ˆæ–°å»ºï¼‰
- `docs/ç»„ä»¶åº“ä½¿ç”¨æŒ‡å—.md`ï¼ˆæ–°å»ºï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- ç¤ºä¾‹é¡µé¢å®Œæ•´å±•ç¤ºæ‰€æœ‰åŠŸèƒ½
- æ–‡æ¡£æ¸…æ™°æ˜“æ‡‚
- åŒ…å«æœ€ä½³å®è·µå»ºè®®

---

## ğŸ”‘ å…³é”®æŠ€æœ¯ç‚¹

### 1. Ant Design Mobile ç»„ä»¶åœ¨å¹³æ¿ä¸Šçš„æ˜¾ç¤º

**é—®é¢˜**ï¼šAnt Design Mobile ç»„ä»¶ä¸ºæ‰‹æœºç«¯ä¼˜åŒ–ï¼Œåœ¨å¹³æ¿ä¸Šå¯èƒ½æ˜¾å¾—è¿‡å°ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨å“åº”å¼ CSS å˜é‡è¦†ç›–ç»„ä»¶å°ºå¯¸
- åˆ›å»ºäºŒæ¬¡å°è£…ç»„ä»¶ï¼Œæ ¹æ®è®¾å¤‡ç±»å‹åº”ç”¨ä¸åŒæ ·å¼
- ä½¿ç”¨ `useResponsive` Hook åŠ¨æ€è°ƒæ•´ç»„ä»¶ props

```tsx
// ç¤ºä¾‹ï¼šå“åº”å¼ Button
export function ResponsiveButton(props: ButtonProps) {
  const { isTablet } = useResponsive();

  return (
    <Button
      {...props}
      size={isTablet ? 'large' : props.size || 'middle'}
      style={{
        fontSize: isTablet ? '16px' : '14px',
        ...props.style,
      }}
    />
  );
}
```

### 2. æ¨ªç«–å±åˆ‡æ¢æµç•…æ€§

**é—®é¢˜**ï¼šæ¨ªç«–å±åˆ‡æ¢æ—¶å¸ƒå±€å¯èƒ½é—ªçƒæˆ–é”™ä½ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ CSS `orientation` åª’ä½“æŸ¥è¯¢
- ä½¿ç”¨ `transition` å¹³æ»‘è¿‡æ¸¡
- ä½¿ç”¨ `useOrientation` Hook å»¶è¿Ÿé‡æ–°æ¸²æŸ“

```css
/* æ¨ªç«–å±è¿‡æ¸¡ */
.responsive-layout {
  transition: all 0.3s ease-in-out;
}

@media (orientation: portrait) {
  .responsive-layout {
    flex-direction: column;
  }
}

@media (orientation: landscape) {
  .responsive-layout {
    flex-direction: row;
  }
}
```

### 3. æš—é»‘æ¨¡å¼è‰²å½©å¯¹æ¯”åº¦

**é—®é¢˜**ï¼šç¡®ä¿æš—é»‘æ¨¡å¼ç¬¦åˆ WCAG AA æ ‡å‡†ï¼ˆå¯¹æ¯”åº¦è‡³å°‘ 4.5:1ï¼‰ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨åœ¨çº¿å·¥å…·æ£€æŸ¥å¯¹æ¯”åº¦ï¼šhttps://webaim.org/resources/contrastchecker/
- ä¸»æ–‡æœ¬å¯¹èƒŒæ™¯ï¼šè‡³å°‘ 4.5:1
- å¤§æ–‡æœ¬å¯¹èƒŒæ™¯ï¼šè‡³å°‘ 3:1
- ä½¿ç”¨ `color-contrast()` CSS å‡½æ•°ï¼ˆæœªæ¥ï¼‰

**æ¨èé¢œè‰²ç»„åˆ**ï¼š
```typescript
// æš—é»‘æ¨¡å¼æ–‡æœ¬è‰²ï¼ˆå¯¹ #141414 èƒŒæ™¯ï¼‰
textPrimary: '#E8E8E8',    // å¯¹æ¯”åº¦ 12.63:1 âœ…
textSecondary: '#B8B8B8',  // å¯¹æ¯”åº¦ 7.5:1 âœ…
textTertiary: '#8C8C8C',   // å¯¹æ¯”åº¦ 4.5:1 âœ…
```

### 4. æ€§èƒ½ä¼˜åŒ–

**ä¼˜åŒ–å»ºè®®**ï¼š

1. **ä»£ç åˆ†å‰²**
```typescript
// æ‡’åŠ è½½éå…³é”®ç»„ä»¶
const ThemeToggle = lazy(() => import('@/components/common/ThemeToggle'));
```

2. **å›¾ç‰‡ä¼˜åŒ–**
```tsx
// ä½¿ç”¨ Next.js Image ç»„ä»¶
import Image from 'next/image';

<Image
  src="/image.jpg"
  alt="..."
  width={750}
  height={500}
  sizes="(max-width: 768px) 100vw, 50vw"
/>
```

3. **è™šæ‹Ÿåˆ—è¡¨**
```tsx
// é•¿åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
import { VirtualList } from 'antd-mobile';

<VirtualList
  items={longList}
  itemHeight={50}
  renderItem={(item) => <ListItem data={item} />}
/>
```

4. **é˜²æŠ–/èŠ‚æµ**
```typescript
// çª—å£ resize äº‹ä»¶ä½¿ç”¨é˜²æŠ–
const debouncedResize = useMemo(
  () => debounce(handleResize, 150),
  []
);

useEffect(() => {
  window.addEventListener('resize', debouncedResize);
  return () => window.removeEventListener('resize', debouncedResize);
}, [debouncedResize]);
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½æ€§
- âœ… æ”¯æŒ 375px-1366px å…¨å°ºå¯¸å“åº”å¼
- âœ… æ¨ªç«–å±è‡ªåŠ¨é€‚é…æ— é—ªçƒ
- âœ… ä¸»é¢˜è·Ÿéšç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢
- âœ… äº®è‰²å’Œæš—é»‘æ¨¡å¼è‰²å½©å¯¹æ¯”åº¦ç¬¦åˆ WCAG AA
- âœ… æ‰€æœ‰ç»„ä»¶åœ¨æ‰‹æœºå’Œå¹³æ¿ä¸Šæ˜¾ç¤ºæ­£å¸¸

### æ€§èƒ½
- âœ… é¦–æ¬¡åŠ è½½æ—¶é—´ < 3s
- âœ… ä¸»é¢˜åˆ‡æ¢æ— æ˜æ˜¾å»¶è¿Ÿ (< 100ms)
- âœ… æ¨ªç«–å±åˆ‡æ¢æµç•… (< 300ms)
- âœ… é•¿åˆ—è¡¨æ»šåŠ¨æµç•… (60fps)

### ä»£ç è´¨é‡
- âœ… TypeScript æ— ç±»å‹é”™è¯¯
- âœ… ESLint æ— è­¦å‘Š
- âœ… ç»„ä»¶ API æ–‡æ¡£å®Œæ•´
- âœ… å…³é”®åŠŸèƒ½æœ‰å•å…ƒæµ‹è¯•

### å…¼å®¹æ€§
- âœ… iOS Safari 14+
- âœ… Android Chrome 90+
- âœ… å¾®ä¿¡æµè§ˆå™¨
- âœ… æ”¯æŒ iPhone SE åˆ° iPad Pro å…¨ç³»åˆ—

---

## ğŸ“š å‚è€ƒèµ„æ–™

1. **Ant Design Mobile å®˜æ–¹æ–‡æ¡£**
   - ä¸»é¢˜å®šåˆ¶ï¼šhttps://mobile.ant.design/zh/guide/theming
   - CSS å˜é‡ï¼šhttps://mobile.ant.design/zh/guide/css-variables

2. **å“åº”å¼è®¾è®¡**
   - MDN åª’ä½“æŸ¥è¯¢ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/CSS/Media_Queries
   - CSS Container Queriesï¼šhttps://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Container_Queries

3. **æš—é»‘æ¨¡å¼**
   - prefers-color-schemeï¼šhttps://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme
   - WCAG å¯¹æ¯”åº¦ï¼šhttps://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html

4. **æ€§èƒ½ä¼˜åŒ–**
   - Next.js æ€§èƒ½ï¼šhttps://nextjs.org/docs/app/building-your-application/optimizing
   - React æ€§èƒ½ï¼šhttps://react.dev/learn/render-and-commit

---

**è®¡åˆ’åˆ›å»ºæ—¶é—´**: 2025-12-08
**æœ€åæ›´æ–°æ—¶é—´**: 2025-12-08ï¼ˆæ›´æ–°å®é™…è¿›åº¦ï¼‰
**å½“å‰é˜¶æ®µ**: é˜¶æ®µ 3ï¼ˆå“åº”å¼å·¥å…·ï¼‰
**æ€»ä½“è¿›åº¦**: 37%
